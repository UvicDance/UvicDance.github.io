/*!CK:445664395!*//*1417407730,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["M+cY3"]); }

__d("ComposerXHiddenInputClear",[],function(a,b,c,d,e,f){function g(h){h.element.value='';}e.exports=g;},null);
__d("ComposerXSessionInputClear",[],function(a,b,c,d,e,f){function g(h){h.element.value=(new Date()).valueOf().toString().substr(0,10);}e.exports=g;},null);
__d("ComposerXStatusAttachment",["Arbiter","BanzaiODS","Button","ComposerXAttachment","ComposerXAttachmentButtonBarState","ComposerXAttachmentUtils","ComposerXController","ComposerXDragDrop","ComposerXPrivacyWidgetTags","DOM","Event","Parent","URI","URLScraper","copyProperties","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){for(var w in j)if(j.hasOwnProperty(w))y[w]=j[w];var x=j===null?null:j.prototype;y.prototype=Object.create(x);y.prototype.constructor=y;y.__superConstructor__=j;function y(z,aa,ba){"use strict";j.call(this);this._root=z;this._tagger=aa;this._config=ba;this.attachmentClassName=ba.classname;}y.prototype.getRoot=function(){"use strict";return this._root;};y.prototype.initWithComponents=function(){"use strict";var z=this.getComponent('maininput');l.initMentions(z,this._config.mentionsPlaceholder,this.getComposerID());this._tagger.init(this);this._privacyWidgetTags=new o(this);k.trackCityChanges(this);var aa=p.find(z.element,'textarea.input');if(!this._scraper){this._scraper=new t(aa);this._scraper.subscribe('match',function(da,ea){if(!this._config.scraper_endpoint)return;var fa=new s(this._config.scraper_endpoint);fa.addQueryData({scrape_url:encodeURIComponent(ea.url),remove_url:this._config.remove_url,attachment_class:this._config.classname});m.getAttachment(this._root,fa.toString());}.bind(this));}this._scraper.enable();if(this._config.textOnlyEdit){this._scraper.disable();this._scraper=null;}if(!this._isEditComposer()){this._scraper.check();}else{var ba=aa.value.length;aa.setSelectionRange(ba,ba);}if(this._config.plus_version){this._dragdrop=new n(this._root,this._composerID,this._config.targetID);this._dragdrop.enableURLDropping();}var ca=p.scry(this._root,"._9s");if(ca.length>0)this._removeListener=q.listen(ca[0],'click',function(){var da=p.scry(this._root,'input[name="hide_object_attachment"]');if(da.length!==0)da[0].value=1;var ea=this._config.remove_endpoint;if(!ea)ea=this._config.remove_url;h.bumpEntityKey('content_production','composer.remove_link.fbfeed');m.getAttachment(this._root,ea);}.bind(this));if(this._config.postActionsButton!=null)this._config.postActionsButton.initHiddenInputs(this.getComponent('pabhiddeninputs').instance);g.inform('ComposerXStatusAttachment/ready',this._composerID,g.BEHAVIOR_STATE);z.instance.subscribe('valueUpdate',function(da,ea){var fa=p.scry(this._root,"._4jy1")[0];i.setEnabled(fa,(ea.value!==null&&ea.value.trim().length>0)||ea.hasAuxContent);}.bind(this));};y.prototype.cleanup=function(){"use strict";this._tagger.cleanup();this._privacyWidgetTags.destroy();this._privacyWidgetTags=null;this._scraper.disable();if(this._removeListener){this._removeListener.remove();this._removeListener=null;}if(this._dragdrop){this._dragdrop.deactivate();this._dragdrop=null;}};y.prototype.reset=function(){"use strict";this._tagger.reset();};y.prototype.canSwitchAway=function(){"use strict";return !r.byClass(this._root,'async_saving');};y.prototype.allowOGTagPreview=function(){"use strict";return true;};y.prototype._isEditComposer=function(){"use strict";return !!this.getComponent('editparams');};u(y.prototype,{_privacyWidgetTags:null,_scraper:null,_dragdrop:null,_removeListener:null});e.exports=y;},null);
__d("ComposerXCameraIconBehavior",["Arbiter","ComposerXMediaUploadHandler","CSS","Event","cx"],function(a,b,c,d,e,f,g,h,i,j,k){var l={initCameraIcon:function(m){this._cameraIcon=m.getComponent('cameraicon');if(!this._config.showCameraIcon){i.hide(this._cameraIcon.element);return;}i.show(this._cameraIcon.element);var n=this._cameraIcon.instance,o=new h(this._config.composerID,{imagesOnly:this._config.imagesOnly,isEditComposer:this._config.isEditComposer,photoUploadOverrideEndpoint:this._config.photoUploadOverrideEndpoint});this._listeners.push(j.listen(this._cameraIcon.element,'click',function(){o.fetchAttachments();g.inform('cameraicon/click');}.bind(this)));this._subscriptions.push(n.subscribe('change',function(){o.handleFileSelected(n);i.addClass(this._cameraIcon.element,"_19_a");}.bind(this)));}};e.exports=l;},null);
__d("ComposerXPlusTagger",["ComposerXCameraIconBehavior","ComposerXStandardTagger","classWithMixins","mixin"],function(a,b,c,d,e,f,g,h,i,j){var k=i(h,j(g));for(var l in k)if(k.hasOwnProperty(l))n[l]=k[l];var m=k===null?null:k.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=k;function n(o){"use strict";k.call(this,o);this._eventuallyTagger=null;}n.prototype.init=function(o){"use strict";m.init.call(this,o);if(o.getComponent('cameraicon'))this.initCameraIcon(o);};n.prototype._nonObstrusiveSwitchToTagger=function(o){"use strict";var p=this._onTaggerShowCallbacks[o];delete this._onTaggerShowCallbacks[o];this.switchToTagger(o);this._dontHideTaggerOnMentionsFocus=o;this._onTaggerShowCallbacks[o]=p;};n.prototype.eventuallySwitchToTagger=function(o){"use strict";if(!this.isAnyTaggerShown()){this._nonObstrusiveSwitchToTagger(o);}else if(this._currentTagger!==o)this._eventuallyTagger=o;};n.prototype.switchToTagger=function(o){"use strict";if(this._eventuallyTagger===o)this._eventuallyTagger=null;this._nonEventuallyHideTaggers();this._showTagger(o);};n.prototype.hideTaggers=function(){"use strict";m.hideTaggers.call(this);if(this._eventuallyTagger){this._nonObstrusiveSwitchToTagger(this._eventuallyTagger);this._eventuallyTagger=null;}};n.prototype._nonEventuallyHideTaggers=function(){"use strict";m.hideTaggers.call(this);};n.prototype._hideTaggersFromMentionsInputClick=function(){"use strict";if(this._currentTagger!=this._dontHideTaggerOnMentionsFocus){this.eventuallySwitchToTagger(this._dontHideTaggerOnMentionsFocus);m._hideTaggersFromMentionsInputClick.call(this);}};e.exports=n;},null);
__d("ComposerXPlusTaggerWithOG",["ComposerXOGTaggerBehavior","ComposerXPlusTagger","classWithMixins","mixin"],function(a,b,c,d,e,f,g,h,i,j){var k=i(h,j(g));for(var l in k)if(k.hasOwnProperty(l))n[l]=k[l];var m=k===null?null:k.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=k;function n(){"use strict";if(k!==null)k.apply(this,arguments);}n.prototype.init=function(o){"use strict";m.init.call(this,o);this.initOGTagger(o);};n.prototype.cleanup=function(){"use strict";m.cleanup.call(this);this.cleanupOGTagger();};e.exports=n;},null);
__d("ComposerXOGTaggerReset",["CSS"],function(a,b,c,d,e,f,g){function h(i){i.instance.reset();g.hide(i.element);}e.exports=h;},null);
__d("ComposerXPeopleTaggerReset",["CSS"],function(a,b,c,d,e,f,g){function h(i){i.instance.reset();g.hide(i.element);}e.exports=h;},null);
__d("ComposerXPlaceTaggerReset",["CSS"],function(a,b,c,d,e,f,g){function h(i){i.instance.getCore().reset();g.hide(i.element);}e.exports=h;},null);